<div ng-show='getRequestComplete'>
  <div class='loanDetails' ng-show='loan !== null'>

    <div class="row">
      <div class="col-xs-12 lendingDashTitle">
        <h2 class="white text-center">Loan Details</h3>
      </div>
    </div>

    <div>
      <p class="h2 white loanDetail">{{loan.borrower_id.user.display_name}}</p>
      <p class="h3 white loanDetail">Organization:  {{loan.borrower_id.organization}}</p>
      <p class="h4 white loanDetail">Category:  {{loan.category}}</p>
      <p class="h4 white loanDetail">Purpose:  {{loan.purpose}}</p>

      <br>
      <p class="h4 white loanDetail">Amount Requested:  ${{loan.principal}}.00 by {{loan.match_deadline}}</p>
      <p class="h4 white loanDetail">Amount Paid Back:  ${{loan.payback_amount}}.00 within {{loan.payback_days}} of receipt.</p>

      <br>
      <p class="h4 white loanDetail">Bio:  {{loan.borrower_id.user.about}}</p>
    </div>

    <br>
    
    <div class='row'>
        <div class='col-xs-6'>
          <button class="btn btn-outline-inverse btn-lg center-block" ng-click='returnToDashboard()'>Back</button>
        </div>
        <div class='col-xs-6' >
          <button class="btn btn-outline-inverse btn-lg center-block" ng-click="openConfirmation()">Fund this Loan</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Display error message if loan doesn't exist in db -->
  <div class='loanLoadError' ng-show='loan === null'>
    <p>Sorry, <em class='nonexistentLoan'>Loan #{{loanId}}</em> does not exist.</p>
    <button class='btn btn-success' ng-click='returnToDashboard()'>Return to Lending Dashboard</button>
  </div>

</div>

<script type="text/ng-template" id="modalConfirmation.html">
  <div class="modal-header">
    <h3>Funding Confirmation</h3>
  </div>
  <div class="modal-body">
    <p>You agree to fund {{loan.borrower_id.user.display_name}}s request for ${{loan.principal}}.00.</p>
    <p>{{loan.borrower_id.user.display_name}}s agrees to refund you ${{loan.payback_amount}}.00 within {{loan.payback_days}} of receipt.</p>
    <br>
    <strong>Terms of Service</strong>
    <p>Well, the way they make shows is, they make one show. That shows called a pilot. Then they show that show to the people who make shows, and on the strength of that one show they decide if theyre going to make more shows. Some pilots get picked and become television programs. Some dont, become nothing. She starred in one of the ones that became nothing.</p>
  </div>
  <div class="modal-footer">
    <button class="btn btn-danger" ng-click='cancelModal()'>Cancel</button>
    <button class="btn btn-success" ng-click='confirmFunding()'>Confirm Funding</button>
  </div>
</script>

