<section class="content">
  <div class="row">
    <div class="col-xs-12">
      <h2 class="white text-center">Borrow Request</h2>
    </div>
  </div>
  <form class="form-horizontal" role="form" name="loanRequestForm" novalidate>
    <div class="form-group" ng-class="{ 'has-error' : loanRequestForm.debtAmount.$dirty && loanRequestForm.debtAmount.$invalid, 'has-success' : loanRequestForm.debtAmount.$dirty && !loanRequestForm.debtAmount.$invalid }">
      <div class="col-xs-12">
        <div class="input-group input-group-lg">
          <span class="input-group-addon">$</span>
          <label for="amount" class="sr-only">Loan Amount</label>
          <input type="number" min=10 max=200 name="debtAmount" ng-model="loan.principal" class="form-control" id="amount" placeholder="Loan Amount" autofocus required />
          <span class="input-group-btn">
            <button popover-placement="left" popover="The amount of money you would like funding for." 
              class="btn btn-outline-inverse" type="button">?</button>
          </span>
        </div>
        <span class="help-block" ng-show="loanRequestForm.debtAmount.$dirty && loanRequestForm.debtAmount.$error.required">Loan Amount required.</span>
        <span class="help-block" ng-show="loanRequestForm.debtAmount.$dirty && loanRequestForm.debtAmount.$error.min">Minimum loan is $10.</span>
        <span class="help-block" ng-show="loanRequestForm.debtAmount.$dirty && loanRequestForm.debtAmount.$error.max">Maximum loan is $200.</span>
      </div>
    </div>


    <div class="form-group" ng-class="{ 'has-error' : loanRequestForm.debtDeadline.$dirty && loanRequestForm.debtDeadline.$invalid, 'has-success' : loanRequestForm.debtDeadline.$dirty && !loanRequestForm.debtDeadline.$invalid }">
      <div class="col-xs-12">
        <div class="input-group input-group-lg">
          <span class="input-group-addon glyphicon glyphicon-calendar"></span>
          <label for="deadline" class="sr-only">Need by deadline</label>
          <input name="debtDeadline" value="{{ loan.match_deadline }}" min="{{ loan.match_deadline }}" ng-model="loan.match_deadline" type="date" class="form-control" id="deadline" required />
          <span class="input-group-btn">
            <button popover-placement="left" popover="The date by which you need the funding by."
              class="btn btn-outline-inverse" type="button">?</button>
          </span>
        </div>
        <span class="help-block" ng-show="loanRequestForm.debtDeadline.$dirty && loanRequestForm.debtDeadline.$error.required">Select a date by which you need the loan.</span>
      </div>
    </div>


    <div class="form-group" ng-class="{ 'has-error' : loanRequestForm.debtPayback.$dirty && loanRequestForm.debtPayback.$invalid, 'has-success' : loanRequestForm.debtPayback.$dirty && !loanRequestForm.debtPayback.$invalid }">
      <div class="col-xs-12">
        <div class="input-group input-group-lg">
          <span class="input-group-addon">$</span>
          <label for="amount" class="sr-only">Payback Amount</label>
          <input type="number" name="debtPayback" class="form-control" ng-model='loan.payback_amount' id="payback-amount" placeholder="Payback Amount" payback-validation required>
          <span class="input-group-btn">
            <button popover-placement="left" popover="The amount you agree to payback to your funder." 
              class="btn btn-outline-inverse" type="button">?</button>
          </span>
        </div>
        <span class="help-block" ng-show="loanRequestForm.debtPayback.$dirty && loanRequestForm.debtPayback.$error.required">Payback amount required.</span>
        <span class="help-block" ng-show="loanRequestForm.debtPayback.$dirty && loanRequestForm.debtPayback.$error.min">Minimum loan is $10.00.</span>
        <span class="help-block" ng-show="loanRequestForm.debtPayback.$dirty && loanRequestForm.debtPayback.$error.paybackThreshold">Payback amount must be greater than or equal to loan amount.</span>
      </div>
    </div>


    <div class="form-group" ng-class="{ 'has-error' : loanRequestForm.debtDueSelection.$dirty && loanRequestForm.debtDueSelection.$invalid, 'has-success' : loanRequestForm.debtDueSelection.$dirty && !loanRequestForm.debtDueSelection.$invalid }">
      <div class="col-xs-12">
        <div class="input-group input-group-lg">
          <span class="input-group-addon glyphicon glyphicon-list"></span>
          <label for="payback-deadline" class="sr-only">Payback deadline</label>
          <select name="debtDueSelection" ng-model="loan.payback_days" class="form-control" id="payback-deadline" required>
            <option value="" disabled selected>Payback deadline</option>
            <option value="7">One week</option>
            <option value="14">Two weeks</option>
            <option value="30">One month</option>
            <option value="60">Two months</option>
            <option value="90">Three months</option>
            <option value="180">Six months</option>
            <option value="365">Twelve months</option>
          </select>
          <span class="input-group-btn">
            <button popover-placement="left" popover="The amount of time between receiving funding and paying your funder back." 
              class="btn btn-outline-inverse" type="button">?</button>
          </span>
        </div>
        <span class="help-block" ng-show="loanRequestForm.debtDueSelection.$dirty && loanRequestForm.debtDueSelection.$error.required">Payback deadline required.</span>
      </div>
    </div>


    <div class="form-group" ng-class="{ 'has-error' : loanRequestForm.debtCategory.$dirty && loanRequestForm.debtCategory.$invalid, 'has-success' : loanRequestForm.debtCategory.$dirty && !loanRequestForm.debtCategory.$invalid }">
      <div class="col-xs-12">
        <div class="input-group input-group-lg">
          <span class="input-group-addon glyphicon glyphicon-tags"></span>
          <label for="purpose-category" class="sr-only">Purpose Category</label>
          <select name="debtCategory" ng-model="loan.category" class="form-control" id="purpose-category" required>
            <option value="" disabled selected>Purpose</option>
            <option value="Education">Education</option>
            <option value="Transportation">Transportation</option>
            <option value="Entertainment">Entertainment</option>
            <option value="Health">Health</option>
            <option value="Other">Other</option>
          </select>
          <span class="input-group-btn">
            <button popover-placement="left" popover="General category for why you need the funding." 
              class="btn btn-outline-inverse" type="button">?</button>
          </span>
        </div>
        <span class="help-block" ng-show="loanRequestForm.debtCategory.$dirty && loanRequestForm.debtCategory.$error.required">Purpose category required.</span>
      </div>
    </div>
    <div class="form-group" ng-class="{ 'has-error' : loanRequestForm.purpose.$dirty && loanRequestForm.purpose.$invalid, 'has-success' : loanRequestForm.purpose.$dirty && !loanRequestForm.purpose.$invalid }">
      <div class="col-xs-12">
        <label for="purpose" class="sr-only">Purpose text</label>
        <textarea name="purpose" id="purpose" class="form-control" rows="3" maxlength="140" ng-model="loan.reason" placeholder="Elaborate on why you need the loan.  More information increases the likehood of lending. You have 140 characters." required></textarea>
        <span class="help-block" ng-show="loanRequestForm.purpose.$dirty && loanRequestForm.purpose.$error.required">Purpose category required.</span>
      </div>
    </div>
    <div class="button-group row">
      <div class="col-xs-4 col-xs-offset-2">
        <button type="button" class="btn btn-outline-inverse btn-lg btn-block" ng-click="cancel()">Cancel</a>
      </div>
      <div class="col-xs-4">
        <button class="btn btn-outline-inverse btn-lg btn-block" ng-click="borrowConfirm()" ng-disabled="loanRequestForm.$invalid" >Submit</button>
      </div>
    </div>
  </form>
</section>
